<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brand-orange': {
                'light': '#fed7aa', // A soft, light orange
                'DEFAULT': '#FB8C00', // A vibrant, primary orange
                'dark': '#E65100', // A deep, strong orange
              },
            }
          }
        }
      }
    </script>
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="antialiased">
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;
      const { createClient } = supabase;

      // Initialize Supabase client
      const supabaseUrl = 'https://jxlcchbvawbkmzfigqmd.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4bGNjaGJ2YXdia216ZmlncW1kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0ODA5OTgsImV4cCI6MjA3NDA1Njk5OH0.VBMshOHnWYkdSeDZ6asGwO2CaROp_tgQncQ-EWXF-ho';
      const supabaseClient = createClient(supabaseUrl, supabaseKey);

      const App = () => {
        const [email, setEmail] = useState('');
        const [loading, setLoading] = useState(false);
        const [successMessage, setSuccessMessage] = useState('');
        const [errorMessage, setErrorMessage] = useState('');

        const handleSubmit = async (e) => {
          e.preventDefault();
          setLoading(true);
          setSuccessMessage('');
          setErrorMessage('');

          const { data, error } = await supabaseClient.auth.resetPasswordForEmail(email, {
            redirectTo: "https://vionexsite-source.github.io/Vionex-/login.html",
          });

          setLoading(false);

          if (error) {
            setErrorMessage(error.message);
          } else {
            setSuccessMessage("A password reset link has been sent to your email.");
            setEmail('');
          }
        };

        return (
          <div className="bg-brand-orange-light min-h-screen flex flex-col items-center justify-center p-4">
            <div className="w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6">
              <div className="text-center">
                <h1 className="text-3xl font-bold text-gray-800">Forgot Password</h1>
                <p className="text-gray-500 mt-2">
                  No worries, we'll send you reset instructions.
                </p>
              </div>
              
              <div className="space-y-4">
                {successMessage && (
                  <div className="bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert">
                    <p>{successMessage}</p>
                  </div>
                )}
                {errorMessage && (
                  <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
                    <p>{errorMessage}</p>
                  </div>
                )}
              </div>

              <form onSubmit={handleSubmit} className="space-y-6">
                <div>
                  <label htmlFor="email" className="block text-sm font-semibold text-gray-700 mb-2">
                    Email Address
                  </label>
                  <div className="relative">
                    <span className="absolute inset-y-0 left-0 flex items-center pl-3">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
                      </svg>
                    </span>
                    <input
                      id="email"
                      name="email"
                      type="email"
                      autoComplete="email"
                      required
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                      disabled={loading}
                      className="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition disabled:bg-gray-100"
                      placeholder="you@example.com"
                    />
                  </div>
                </div>

                <div>
                  <button
                    type="submit"
                    disabled={loading}
                    className="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-brand-orange hover:bg-brand-orange-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-orange transition-transform transform hover:scale-105 duration-300 disabled:bg-brand-orange-light disabled:cursor-not-allowed disabled:transform-none"
                  >
                    {loading ? 'Sending...' : 'Send Reset Link'}
                  </button>
                </div>
              </form>

              <div className="text-center">
                <a
                  href="login.html"
                  className="font-medium text-brand-orange hover:text-brand-orange-dark transition duration-300 flex items-center justify-center gap-2"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                  </svg>
                  Back to Login
                </a>
              </div>
            </div>
          </div>
        );
      };

      const rootElement = document.getElementById('root');
      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
</body>
</html>